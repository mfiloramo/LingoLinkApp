<!-- LOADING ANIMATION -->
<div *ngIf="isLoading" class="loading-container">
  <img src="../../../assets/animations/loading-globe.gif" alt="Loading Animation" class="ping-slower"/>
</div>
<!-- END LOADING ANIMATION -->

<!-- BACK ARROW BUTTON -->
<div *ngIf="selectedConversation">
  <div (click)="deselectConversation()">
    <mat-icon class="back-arrow">arrow_back</mat-icon>
    <span style="color: white;">Back to Conversations</span>
  </div>
</div>
<!-- END BACK ARROW BUTTON -->

<!-- CONVERSATIONS LIST -->
<div *ngIf="!selectedConversation">
  <div *ngFor="let conversation of conversations">

    <div class="convoItem" *ngIf="checkConvoVisibility(conversation)" (click)="onSelectConversation(conversation)">
      <div class="circle" [style.background-image]="'url(' + conversation.profileImageSrc + ')'"></div>
      <div class="nameAndMessage">
        <div class="name">{{ conversation.StarterUsername }}</div>
        <div class="message" [innerHTML]="truncateSentence(conversation.LatestMessage, 100)"></div>
      </div>

      <!-- NOTIFICATION BELL -->
      <div class="notificationAndTimestamp">
        <mat-icon class="notificationIcon">notifications</mat-icon>
        <div class="timestamp">{{ convertIsoString(conversation.latest_timestamp) }}</div>
      </div>

      <!-- DELETE CONVERSATION BUTTON -->
      <div class="deleteConversation">
        <div (click)="deleteConversation(user, conversation.conversation_id)">
          <mat-icon class="notificationIcon">close</mat-icon>
        </div>
      </div>

    </div>
<!-- END CONVERSATIONS LIST -->

  </div>
</div>
