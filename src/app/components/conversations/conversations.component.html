<!-- LOADING ANIMATION -->
@if (isLoading) {
  <div class="loading-container">
    <img src="../../../assets/animations/loading-globe.gif" alt="Loading Animation" class="ping-slower"/>
  </div>
}

<!-- CONVERSATIONS TOOLBAR -->
<div class="conversation-toolbar">
  <button class="conversation-toolbar-edit-btn" mat-button>Edit</button>
  <span class="toolbar-spacer"></span>
  <button class="conversation-toolbar-compose-btn" mat-icon-button (click)="onCreateNewConversation()">
    <mat-icon>create</mat-icon>
  </button>
</div>

<!-- CONVERSATIONS LIST -->
<div class="conversation-list" #conversationList>
@for (conversation of conversations; track conversation) {
  <div>
    @if (checkConversationVisibility(conversation)) {
      <div class="conversation-item" (click)="onSelectConversation(conversation)">
        <div class="circle" [style.background-image]="'url(' + conversation.StarterUserPic + ')'"></div>
        <div class="name-and-msg">
          <div class="name">{{ conversation.StarterUsername }}</div>
          <div class="message" [innerHTML]="truncateSentence(conversation.LatestMessage, 100)"></div>
        </div>

        <!-- NOTIFICATION BELL -->
        <div class="notification-and-timestamp">
          <mat-icon class="notification-icon">notifications</mat-icon>
          <div class="timestamp">{{ convertIsoString(conversation.latestTimestamp) }}</div>
        </div>

        <!-- DELETE CONVERSATION BUTTON -->
        <div class="delete-conversation">
          <div (click)="removeConversation(userState, conversation)">
            <mat-icon class="notification-icon">close</mat-icon>
          </div>
        </div>

      </div>
    }
  </div>
}
</div>
